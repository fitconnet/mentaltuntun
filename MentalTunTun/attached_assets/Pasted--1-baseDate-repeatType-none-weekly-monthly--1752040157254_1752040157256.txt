âœ… 1. ë°˜ë³µ ì¼ì • ì„¤ì • êµ¬ì¡° ê°œë… ì •ë¦¬
í•­ëª©	ì„¤ëª…
ê¸°ì¤€ ë‚ ì§œ (baseDate)	ì¼ì •ì´ ì‹œì‘ë˜ëŠ” ê¸°ì¤€ì¼
ë°˜ë³µ íƒ€ì… (repeatType)	none, weekly, monthly
ë°˜ë³µ ì£¼ê¸° (interval)	1 = ë§¤ì£¼/ë§¤ì›”, 2 = ê²©ì£¼/ê²©ì›” ë“±
ë°˜ë³µ ê¸°ì¤€ (basis)	ìš”ì¼ ê¸°ì¤€, ë‚ ì§œ ê¸°ì¤€ (ì›”ê°„)
ë°˜ë³µ ìš”ì¼ (weekdays)	[06] (ì¼í† ), ì£¼ê°„ì¼ ê²½ìš°ë§Œ ì‚¬ìš©
ë°˜ë³µ íšŸìˆ˜ (repeatCount)	níšŒ ë°˜ë³µ (0ì€ ë¬´í•œ ë°˜ë³µ)
ë°˜ë³µ ì¢…ë£Œì¼ (endDate)	íŠ¹ì • ì¼ ì´í›„ ì¢…ë£Œë  ê²½ìš° ì‚¬ìš© (ì„ íƒì )

ğŸ“¦ 2. ë°˜ë³µ ì¼ì • ë°ì´í„° êµ¬ì¡° ì„¤ê³„
ts
ë³µì‚¬
í¸ì§‘
interface RepeatRule {
  type: 'none' | 'weekly' | 'monthly';
  interval: number; // ë°˜ë³µ ì£¼ê¸° (1 = ë§¤ì£¼/ë§¤ì›”, 2 = ê²©ì£¼/ê²©ì›”)
  weekdays?: number[]; // ì£¼ê°„ ë°˜ë³µìš© ìš”ì¼ (0~6)
  basis?: 'weekday' | 'date'; // ì›”ê°„ ë°˜ë³µ ê¸°ì¤€
  repeatCount?: number; // ë°˜ë³µ íšŸìˆ˜ (ì—†ìœ¼ë©´ ë¬´í•œ ë°˜ë³µ)
  endDate?: string; // ì¢…ë£Œ ë‚ ì§œ (ì„ íƒì )
  baseDate: string; // ìµœì´ˆ ì¼ì • ìƒì„±ì¼
}
âœ… ëª¨ë“  ì¼ì •ì€ groupIdë¡œ ì—°ê²°ë˜ì–´ ìˆì–´ì•¼ í•˜ë©°, ì‚­ì œ/ìˆ˜ì • ì‹œ ê·¸ë£¹ ë‹¨ìœ„ë¡œ ê´€ë¦¬ ê°€ëŠ¥í•´ì•¼ í•¨.

ğŸ“… 3. ë°˜ë³µ ì¼ì • ìƒì„± ë¡œì§ (ê¸°ì¤€ + ë°˜ë³µ ë¶„ë¦¬)
ğŸ“Œ í•µì‹¬ ì¡°ê±´:
baseDateëŠ” ë°˜ë³µ ì¡°ê±´ê³¼ ë¬´ê´€í•˜ë”ë¼ë„ ë¬´ì¡°ê±´ 1íšŒ ìƒì„±

ì´í›„ëŠ” repeatType ê¸°ì¤€ìœ¼ë¡œ ìƒì„±

âœ… A. ì£¼ê°„(weekly) ë°˜ë³µ ìƒì„±
ts
ë³µì‚¬
í¸ì§‘
function generateWeeklyEvents(rule: RepeatRule): Event[] {
  const events: Event[] = []
  const base = new Date(rule.baseDate)
  let weekIndex = 0

  while (!rule.repeatCount || weekIndex < rule.repeatCount) {
    rule.weekdays?.forEach(day => {
      const current = new Date(base)
      current.setDate(base.getDate() + weekIndex * 7 * rule.interval)
      const adjusted = new Date(current)
      adjusted.setDate(adjusted.getDate() + ((day - current.getDay() + 7) % 7))
      const dateStr = adjusted.toISOString().split('T')[0]

      // baseDate ì¤‘ë³µ ë°©ì§€
      if (dateStr !== rule.baseDate) {
        events.push({ date: dateStr })
      }
    })
    weekIndex++
  }
  return events
}
âœ… B. ì›”ê°„(monthly) ë°˜ë³µ ìƒì„±
ts
ë³µì‚¬
í¸ì§‘
function generateMonthlyEvents(rule: RepeatRule): Event[] {
  const events: Event[] = []
  const base = new Date(rule.baseDate)
  let monthIndex = 0

  while (!rule.repeatCount || monthIndex < rule.repeatCount) {
    const currentMonth = new Date(base)
    currentMonth.setMonth(base.getMonth() + rule.interval * monthIndex)

    if (rule.basis === 'date') {
      currentMonth.setDate(base.getDate())
      const dateStr = currentMonth.toISOString().split('T')[0]
      if (dateStr !== rule.baseDate) {
        events.push({ date: dateStr })
      }
    } else if (rule.basis === 'weekday') {
      const nth = Math.floor((base.getDate() - 1) / 7)
      const weekday = base.getDay()
      const adjusted = getNthWeekday(currentMonth.getFullYear(), currentMonth.getMonth(), weekday, nth)
      const dateStr = adjusted.toISOString().split('T')[0]
      if (dateStr !== rule.baseDate) {
        events.push({ date: dateStr })
      }
    }
    monthIndex++
  }

  return events
}
ğŸ—‘ï¸ 4. ì‚­ì œ ë¡œì§ ë¦¬ë””ìì¸
ğŸ’£ ê¸°ì¡´ ë¬¸ì œ
"ì´í›„ ì‚­ì œ" ì‹œ ì „ì²´ ë°˜ë³µ ì¼ì • ì‚­ì œë˜ëŠ” ë²„ê·¸ ë°œìƒ

âœ… í•´ê²° ë°©ì‹
ëª¨ë“  ì¼ì •ì— groupId + date ì €ì¥

ì‚­ì œ ì‹œ DELETE /schedules?groupId=abc&from=2025-07-15 í˜•íƒœë¡œ ì‚¬ìš©

ts
ë³µì‚¬
í¸ì§‘
function deleteRepeatEvents(groupId: string, fromDate: string) {
  db.schedules = db.schedules.filter(ev =>
    ev.groupId !== groupId || new Date(ev.date) < new Date(fromDate)
  )
}
ğŸ¨ 5. UI êµ¬ì„± ìš”ì†Œë³„ ê¸°ëŠ¥ ì„¤ëª…
UI í•„ë“œ	ì„¤ëª…
ë°˜ë³µ ì„¤ì •	ì—†ìŒ / ì£¼ê°„ / ì›”ê°„ ì„ íƒ
ë°˜ë³µ ì£¼ê¸°	ë§¤ì£¼, ê²©ì£¼, ë§¤ì›”, ê²©ì›” ì„¤ì • (interval ê°’)
ê¸°ì¤€ ë‚ ì§œ	ì¼ì •ì˜ ì‹œì‘ì¼ (1íšŒ ìƒì„±)
ë°˜ë³µ ìš”ì¼	ì£¼ê°„ì¼ ê²½ìš° ì„ íƒ ê°€ëŠ¥í•œ ìš”ì¼
ë°˜ë³µ ê¸°ì¤€	ì›”ê°„ì¼ ê²½ìš° ìš”ì¼ ê¸°ì¤€ vs ë‚ ì§œ ê¸°ì¤€
ë°˜ë³µ íšŸìˆ˜	ì •í•´ì§„ íšŸìˆ˜ë§Œí¼ ë°˜ë³µ ìƒì„±
ì¢…ë£Œì¼ (ì„ íƒ)	ë°˜ë³µì„ ì¤‘ë‹¨í•  ë‚ ì§œê°€ ìˆë‹¤ë©´ ì¢…ë£Œì¼ë¡œë„ ì¡°ì ˆ ê°€ëŠ¥

ğŸ§  ì¶©ëŒ ë°©ì§€ ì¡°ê±´
ì¡°ê±´	ì²˜ë¦¬ ë°©ì‹
ê¸°ì¤€ ë‚ ì§œì™€ ë°˜ë³µ ì¡°ê±´ ì¤‘ë³µ	baseDateëŠ” 1íšŒ ìƒì„±, ì´í›„ ì¤‘ë³µ ì œê±° (Set)
ë‹¨ì¼ ì¼ì • + ë°˜ë³µì¼ì • ê²¹ì¹¨	ë‹¨ì¼ ì¼ì •ì—ëŠ” isRepeat: false, ë°˜ë³µ ì¼ì •ì€ groupId í¬í•¨ìœ¼ë¡œ ë¶„ë¦¬
ê°™ì€ ë‚ ì— 2ê°œ ì´ìƒì˜ ì¼ì • ì¡´ì¬	date + groupIdë¡œ ì¶©ëŒ ê°ì§€í•˜ì—¬ alert ë˜ëŠ” ë³‘í•© ì„ íƒ ì œê³µ

ğŸ§¾ ìµœì¢… ìš”ì•½
í•­ëª©	ì„¤ëª…
âœ… ë°˜ë³µ ê¸°ì¤€	ì£¼ê°„/ì›”ê°„ ì„ íƒ ê°€ëŠ¥, ìš”ì¼ ë˜ëŠ” ë‚ ì§œ ê¸°ì¤€ ëª¨ë‘ ì§€ì›
ğŸ” ë°˜ë³µ ì£¼ê¸°	ë§¤ì£¼, ê²©ì£¼, ë§¤ì›”, ê²©ì›” ë“± intervalë¡œ í‘œí˜„
ğŸ¯ ë°˜ë³µ íšŸìˆ˜	repeatCountë¡œ ì œí•œí•˜ê±°ë‚˜ ë¬´í•œ ìƒì„± ê°€ëŠ¥
ğŸ›¡ ì¶©ëŒ ë°©ì§€	baseDateì™€ ë°˜ë³µ ì¡°ê±´ì˜ ì¤‘ë³µ ê°ì§€ ë° ì œê±°
ğŸ—‘ ë°˜ë³µ ì‚­ì œ	groupId + fromDate í•„í„° ì‚­ì œë¡œ ì •í™•í•œ ì‚­ì œ ê°€ëŠ¥