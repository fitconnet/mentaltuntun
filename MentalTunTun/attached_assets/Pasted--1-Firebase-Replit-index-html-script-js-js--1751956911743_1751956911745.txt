âœ… [ì™„ë£Œ ëª©í‘œ] ê°ì • ì¹´ë“œ ì €ì¥ + ë¶ˆëŸ¬ì˜¤ê¸° êµ¬í˜„
ğŸ¯ 1. Firebase ì„¤ì • ì½”ë“œ ë¶™ì´ê¸° (Replitì˜ index.html ë˜ëŠ” script.js)
js
ë³µì‚¬
í¸ì§‘
// Firebase Web SDK ë¡œë“œ ë° ì´ˆê¸°í™”
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
ğŸ‘‰ ìœ„ ê°’ë“¤ì€ Firebase ì½˜ì†” > í”„ë¡œì íŠ¸ ì„¤ì • > ì›¹ì•± ë“±ë¡ ì‹œ ì œê³µëœ ì •ë³´ë¡œ êµì²´í•˜ì„¸ìš”.

ğŸ§© 2. ê°ì • ì¹´ë“œ ì €ì¥ í•¨ìˆ˜ (ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰)
js
ë³µì‚¬
í¸ì§‘
async function saveEmotionCard() {
  const emotion = document.getElementById("emotionInput").value;
  const detail = document.getElementById("detailInput").value;

  try {
    await addDoc(collection(db, "emotion_logs"), {
      emotion: emotion,
      detail: detail,
      createdAt: new Date()
    });
    alert("ê°ì • ì¹´ë“œ ì €ì¥ ì™„ë£Œ!");
  } catch (error) {
    console.error("ê°ì • ì¹´ë“œ ì €ì¥ ì‹¤íŒ¨:", error);
  }
}
ğŸ“¥ 3. ê°ì • ì¹´ë“œ ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜
js
ë³µì‚¬
í¸ì§‘
async function loadEmotionCards() {
  const logsContainer = document.getElementById("logs");
  logsContainer.innerHTML = "";

  const q = query(collection(db, "emotion_logs"), orderBy("createdAt", "desc"));
  const querySnapshot = await getDocs(q);
  querySnapshot.forEach((doc) => {
    const data = doc.data();
    const card = `<div class="card">
      <h3>${data.emotion}</h3>
      <p>${data.detail}</p>
      <small>${new Date(data.createdAt.seconds * 1000).toLocaleString()}</small>
    </div>`;
    logsContainer.innerHTML += card;
  });
}
ğŸ–¼ï¸ 4. HTML ì˜ˆì‹œ UI êµ¬ì„±
html
ë³µì‚¬
í¸ì§‘
<input type="text" id="emotionInput" placeholder="ê¸°ë¶„ (ì˜ˆ: ê¸°ì¨, ìŠ¬í””)">
<textarea id="detailInput" placeholder="ê°ì • ìƒì„¸ ë‚´ìš©ì„ ì ì–´ì£¼ì„¸ìš”."></textarea>
<button onclick="saveEmotionCard()">ê°ì • ê¸°ë¡ ì €ì¥</button>

<hr>

<button onclick="loadEmotionCards()">ê°ì • ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸°</button>
<div id="logs"></div>
ğŸ”’ 5. Firestore ë³´ì•ˆ ê·œì¹™ (ì´ˆê¸° í…ŒìŠ¤íŠ¸ìš©)
js
ë³µì‚¬
í¸ì§‘
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /emotion_logs/{docId} {
      allow read, write: if request.auth != null; // ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥
    }
  }
}
ğŸ“Œ ê°œë°œ ì¤‘ì—ëŠ” request.auth == nullë¡œ ì„¤ì • ê°€ëŠ¥í•˜ì§€ë§Œ ë³´ì•ˆìƒ ì¶”ì²œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.